modules:
  jira:adminPage:
    - key: admin-page
      resource: admin-main
      resolver:
        function: config
      title: Securely Config
      icon: resource:admin-main;icon.svg
    - key: admin-page-config-get-started
      resource: admin-main
      resolver:
        function: config
      title: Securely Config
      useAsConfig: true
      useAsGetStarted: true
  trigger:
    - key: entrypoint
      function: main
      events:
        - avi:jira:created:issue
        - avi:jira:created:attachment
      filter:
        ignoreSelf: true
  function:
    - key: main
      handler: index.run
    - key: process-har-function
      handler: processHar.handler
    - key: config
      handler: config.handler
    - key: scrub
      handler: scrub.handler
    - key: process-comment-func
      handler: processComment.handler
  consumer:
    - key: har-queue-consumer
      queue: har-queue
      resolver:
        function: process-har-function
        method: processEvent
    - key: comment-processor
      queue: comment-queue
      resolver:
        function: process-comment-func
        method: processEvent
resources:
  - key: admin-main
    path: static/admin-page/build
app:
  runtime:
    name: nodejs18.x
  id: ari:cloud:ecosystem::app/aa939881-ce14-411d-9b3b-24206bdb6d44
  licensing:
    enabled: true
permissions:
  scopes:
    - read:jira-work
    - write:jira-work
    - storage:app
  external:
    fetch:
      backend:
        - har.securely.abrega.com
        - api.media.atlassian.com  
  content:
    styles:
      - 'unsafe-inline'